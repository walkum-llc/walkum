"use strict";(self.webpackChunkwalkum=self.webpackChunkwalkum||[]).push([[56],{2604:function(e,t,n){n.d(t,{A:function(){return c}});var a=n(6540),r=n(1468),o=n(4810),l="headerLink-module--svgButton--d9016";var c=e=>{let{leftWord:t="walkum",leftLinkTo:n="/",rightWord:c,rightLinkTo:s=".",cursorColor:i="#FFD700"}=e;const{0:m,1:u}=(0,a.useState)(p()),d=(0,r.d4)((e=>e.account.accountInfo));function p(){return 2e3*Math.random()+1e3}return(0,a.useEffect)((()=>{const e=setInterval((()=>{u(p())}),5e3);return()=>clearInterval(e)}),[]),d?a.createElement("div",{style:{display:"flex",justifyContent:"center"}},a.createElement("div",{className:"headerLink-module--phraseContainer--9d1b4"},a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1200 300",width:"100%",height:"auto",className:"headerLink-module--responsiveSvg--e821b"},a.createElement("g",{transform:"translate(600, 150)",textAnchor:"middle"},a.createElement(o.N_,{to:n},a.createElement("text",{x:"-300",fill:"white",fontFamily:"Courier",fontSize:"90px",className:l},t)),a.createElement("text",{x:"0",fill:i,fontFamily:"Courier",fontSize:"90px",fontWeight:"bold",className:"headerLink-module--blinkingCursor--59495",style:{animationDuration:m+"ms",transform:"scale(5, 5)"}},"|"),a.createElement(o.N_,{to:s},a.createElement("text",{x:"300",fill:"white",fontFamily:"Courier",fontSize:"90px",className:l},c)))))):null}},6064:function(e,t,n){n.d(t,{A:function(){return H}});var a={};n.r(a),n.d(a,{N5:function(){return m},Q:function(){return u},lK:function(){return d},lH:function(){return p},WF:function(){return y},L1:function(){return E},Km:function(){return h},yH:function(){return f},L6:function(){return v},$3:function(){return g},AS:function(){return k},tv:function(){return C},_R:function(){return b},dl:function(){return w},uG:function(){return N},DT:function(){return I},bV:function(){return S},Kk:function(){return A}});var r=n(6540),o=n(1468),l=n(9496),c=n(4810),s=n(6462);var i=e=>{let{quantity:t,stock:n,onDecrease:a,onIncrease:o}=e;return r.createElement("div",null,r.createElement("button",{onClick:e=>{e.stopPropagation(),a()}},"-"),r.createElement("span",null,"   ",t,"   "),r.createElement("button",{onClick:e=>{e.stopPropagation(),o()}},"+"))},m="styles-module--cart--d7a47",u="styles-module--cartIcon--8a034",d="styles-module--cartTable--d19e3",p="styles-module--cartToggleButton--c057a",y="styles-module--cartToggleContainer--edce5",E="styles-module--category--8436a",h="styles-module--categoryHeader--16eb4",f="styles-module--del--281ce",v="styles-module--emptyCartMessage--fe4f3",g="styles-module--grandTotal--7e4b2",k="styles-module--item--2b47c",C="styles-module--itemImage--d83f7",b="styles-module--itemList--6f49f",w="styles-module--priceEach--04a90",N="styles-module--quant--b5a04",I="styles-module--removeButton--45abe",S="styles-module--sectionHeader--6846b",A="styles-module--tot--d3a80";var T=e=>{let{item:t,cart:n,dispatch:a,handleItemClick:c}=e;const s=(0,o.d4)(l.Mv),m=e=>n.some((t=>t.id===e)),u=m(t.id)?n.find((e=>e.id===t.id)).quantity:1,d=e=>{e.stopPropagation(),a((0,l.ZT)(t))},p=e=>{a((0,l._V)({id:t.id,quantity:e}))};return r.createElement("div",{className:k,onClick:()=>c(t)},r.createElement("img",{src:t.image,alt:t.name,className:C}),r.createElement("h3",null,t.name),r.createElement("p",null,t.description),r.createElement("p",null,"$",t.price),s?r.createElement("div",null,r.createElement("p",null,"# Remaining: ",t.stock),m(t.id)?r.createElement("button",{onClick:d,className:I},"Remove from Cart"):r.createElement("button",{onClick:d,disabled:t.stock<=0},"Add to Cart"),m(t.id)&&r.createElement(i,{quantity:u,stock:t.stock,onDecrease:()=>p(Math.max(1,u-1)),onIncrease:()=>p(Math.min(t.stock,u+1))})):null)};var x=e=>{let{section:t,items:n,category:o,openSection:l,setOpenSection:c,handleItemClick:s,cart:i,dispatch:m}=e;return r.createElement("div",{className:a.section},t&&r.createElement("h3",{id:"section-"+t,className:S,onClick:()=>{const e=(null==l?void 0:l.category)===o&&(null==l?void 0:l.section)===t?null:{category:o,section:t};c(e),e&&setTimeout((()=>{const e=document.getElementById("section-"+t);e&&e.scrollIntoView({behavior:"smooth",block:"start"})}),0)}},t),(null==l?void 0:l.category)===o&&(null==l?void 0:l.section)===t||!t?r.createElement("div",{className:b},n.map((e=>r.createElement(T,{key:e.id,item:e,cart:i,dispatch:m,handleItemClick:s})))):null)};var L=e=>{let{category:t,categorySections:n,openCategory:o,setOpenCategory:l,openSection:c,setOpenSection:s,handleItemClick:i,cart:m,dispatch:u}=e;return r.createElement("div",{className:E},r.createElement("h2",{id:"category-"+t,className:h,onClick:()=>{const e=o===t?null:t;l(e),e||s(null),e&&setTimeout((()=>{const e=document.getElementById("category-"+t);e&&e.scrollIntoView({behavior:"smooth",block:"start"})}),0)}},t),o===t&&r.createElement("div",{className:a.sectionList},Array.from(n.entries()).map((e=>{let[n,a]=e;return r.createElement(x,{key:n,section:n,items:a,category:t,openSection:c,setOpenSection:s,handleItemClick:i,cart:m,dispatch:u})}))))};var P=()=>{const e=(0,o.wA)(),t=(0,o.d4)(l.VH),n=(0,o.d4)((e=>e.merchantShop.storeItems)),i=(0,s.useLocation)(),m=new Map;n.forEach((e=>{m.has(e.category)||m.set(e.category,new Map);const t=m.get(e.category);t.has(e.section)||t.set(e.section,[]),t.get(e.section).push(e)}));const{0:u,1:d}=(0,r.useState)(null),{0:p,1:y}=(0,r.useState)(null),E=e=>{(0,c.oo)(i.pathname+"?item="+e.id)};return r.createElement("div",{className:a.itemListContainer},Array.from(m.entries()).map((n=>{let[a,o]=n;return r.createElement(L,{key:a,category:a,categorySections:o,openCategory:u,setOpenCategory:d,openSection:p,setOpenSection:y,handleItemClick:E,cart:t,dispatch:e})})))},O=n(2670);var M=e=>{let{cart:t,paypalRef:n,onApprove:a,createOrder:o}=e;const l=(0,r.useRef)(!1);(0,r.useEffect)((()=>{if(l.current)return void console.log("PayPal buttons already rendered. Skipping initialization.");const e=document.createElement("script"),t=/Mobi|Android/i.test(navigator.userAgent);return e.src="https://www.paypal.com/sdk/js?client-id="+encodeURIComponent({}.PAYPAL_CLIENT_ID)+"&currency=USD&components=buttons&enable-funding=paypal,venmo,card&commit=true&intent=capture"+(t?"&integration-date=2021-02-01":""),e.async=!0,e.onload=()=>{window.paypal&&n.current?(l.current=!0,window.paypal.Buttons({style:{shape:"pill",layout:"vertical",color:"blue",label:"pay"},createOrder:o,onApprove:a}).render(n.current)):console.error("PayPal SDK not loaded properly.")},document.body.appendChild(e),()=>{l.current&&(console.log("Cleaning up PayPal buttons."),l.current=!1),document.body.contains(e)&&document.body.removeChild(e)}}),[t,n,o,a])};var F=e=>{let{cart:t}=e;const n=(0,o.wA)(),a=(0,r.useRef)(null),c={}.SERVER_IP,s={}.PORT,i=(0,o.d4)((e=>e.account.accountInfo.email));return M({cart:t,paypalRef:a,createOrder:async(e,n)=>{try{t.reduce(((e,t)=>e+parseFloat(t.price)*t.quantity),0).toFixed(2);const e=await fetch("https://"+c+":"+s+"/api/orders",{method:"POST",headers:{"Content-Type":"application/json",Origin:window.location.origin},body:JSON.stringify({cart:t})}),n=await e.json();if(console.log("createOrder Response:",n),n.id)return n.id;throw new Error("Failed to create order")}catch(a){throw console.error("createOrder Error:",a),new Error("Could not initiate PayPal Checkout")}},onApprove:async(e,a)=>{try{var r,o,m,u;const a=await fetch("https://"+c+":"+s+"/api/orders/"+e.orderID+"/capture",{method:"POST",headers:{"Content-Type":"application/json",Origin:window.location.origin},body:JSON.stringify({cart:t,merchantEmail:i})}),h=await a.json();if(console.log("onApprove Response:",h),null==h||null===(r=h.purchase_units)||void 0===r||null===(o=r[0])||void 0===o||null===(m=o.payments)||void 0===m||null===(u=m.captures)||void 0===u||!u[0])throw new Error("Capture failed");{var d,p,y,E;const e=null==h||null===(d=h.purchase_units)||void 0===d||null===(p=d[0])||void 0===p||null===(y=p.payments)||void 0===y||null===(E=y.captures)||void 0===E?void 0:E[0];console.log("Transaction completed:",e),n((0,l.sX)())}}catch(h){console.error("onApprove Error:",h),alert("Sorry, your transaction could not be processed.")}}}),r.createElement("div",{ref:a})};var R=()=>{const e=(0,o.wA)(),t=(0,o.d4)(l.VH),n=(0,o.d4)(l.Mv),a=(t,n)=>{const a=Math.max(1,Math.min(n,t.stock));e((0,l._V)({id:t.id,quantity:a}))};return!n||t&&0!==t.length?n?r.createElement("div",{className:m},r.createElement("br",null),r.createElement("table",{className:d},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,"Item"),r.createElement("th",{className:N},"Quantity"),r.createElement("th",{className:A},"Total"),r.createElement("th",{className:f},"X"))),r.createElement("tbody",null,t.map(((t,n)=>{const o=Number(t.price)||0,c=Number(t.quantity)||0,s=o*c;return r.createElement("tr",{key:n},r.createElement("td",{className:O.gX},t.name||"Unnamed Item",r.createElement("br",null),r.createElement("span",{className:w},"$",o.toFixed(2))),r.createElement("td",null,r.createElement(i,{quantity:c,stock:t.stock,onDecrease:()=>a(t,Math.max(1,c-1)),onIncrease:()=>a(t,Math.min(t.stock,c+1))})),r.createElement("td",{className:A},"$",s.toFixed(2)),r.createElement("td",null,r.createElement("button",{onClick:()=>(t=>{e((0,l.ZT)(t))})(t),className:I},"X")))})))),r.createElement("h3",{className:g},"Grand Total: $",t.reduce(((e,t)=>e+(Number(t.price)||0)*(Number(t.quantity)||0)),0).toFixed(2)),r.createElement(F,{cart:t})):null:r.createElement("div",{className:v},r.createElement("p",null,"Your cart is empty"))},q=n(6474),D=n(2604);var _=e=>{let{item:t,onClose:n}=e;const a=(0,o.wA)(),c=(0,o.d4)(l.VH),s=(0,o.d4)(l.Mv),m=e=>c.some((t=>t.id===e)),u=m(t.id)?c.find((e=>e.id===t.id)).quantity:1,d=e=>{e.stopPropagation(),a((0,l.ZT)(t))},p=e=>{a((0,l._V)({id:t.id,quantity:e}))};return(0,r.useEffect)((()=>{const e=e=>{"Escape"===e.key&&n()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[n]),r.createElement("div",{className:"styles-module--modalOverlay--c4284",onClick:n},r.createElement("div",{className:"styles-module--modalContent--8b217",onClick:e=>e.stopPropagation()},r.createElement("button",{className:"styles-module--closeButton--f0cbb",onClick:n},"✕"),r.createElement("h2",null,t.name),r.createElement("img",{src:t.image,alt:t.name,className:"styles-module--modalImage--9c189"}),r.createElement("p",null,t.description),r.createElement("p",null,"$",t.price),s?r.createElement("div",null,r.createElement("p",null,"# Remaining: ",t.stock),m(t.id)?r.createElement("button",{onClick:d,className:I},"Remove from Cart"):r.createElement("button",{onClick:d,disabled:t.stock<=0},"Add to Cart"),m(t.id)&&r.createElement(i,{quantity:u,stock:t.stock,onDecrease:()=>p(Math.max(1,u-1)),onIncrease:()=>p(Math.min(t.stock,u+1))})):null))},V=n(8643),B=n(6795);var H=e=>{let{merchantMode:t=!0,merchantSheet:n="products"}=e;const i=(0,o.wA)(),m=(0,o.d4)(l.dX),d=(0,o.d4)(l.VH),E=(0,o.d4)((e=>e.account.sheetID)),h=(0,o.d4)((e=>e.account.accountInfo)),f=(0,s.useLocation)(),{loading:v,error:g,data:k}=(0,B.b)({spreadsheetId:E,sheetName:n});(0,r.useEffect)((()=>{v||g||!k||(i((0,l.Bl)(k)),i((0,l.q_)()))}),[v,g,k,i]),(0,r.useEffect)((()=>{i((0,l.mk)(t))}),[t,i]);const C=new URLSearchParams("undefined"!=typeof window?window.location.search:"").get("item"),b=(0,o.d4)((e=>e.merchantShop.storeItems)).find((e=>e.id===C));if(v)return r.createElement(V.A,null);if(g)return r.createElement("p",null,"Error loading store items: ",g);const w=d&&d.length>0&&t;return r.createElement("div",null,r.createElement("div",{className:O.kL},t?r.createElement(D.A,{leftWord:h.name,rightWord:h.merchTitle,cursorColor:"#39FF14"}):r.createElement(D.A,{rightWord:"eats",cursorColor:"#39FF14"}),w&&r.createElement("button",{className:p,onClick:()=>{i((0,l.ss)())}},m?r.createElement("div",{className:y},r.createElement("span",null,"Hide"),r.createElement("span",{className:u,role:"img","aria-label":"cart"},"🛒")):r.createElement("div",{className:y},r.createElement("span",null,"Your Cart"),r.createElement("span",{className:u,role:"img","aria-label":"cart"},"🛒"))),m&&r.createElement(R,null)),r.createElement("div",{className:a.itemListContainer},r.createElement(P,null)),r.createElement("div",{className:O.kL},r.createElement(q.A,null)),b&&r.createElement(_,{item:b,onClose:()=>{(0,c.oo)(""+f.pathname)}}))}}}]);
//# sourceMappingURL=f8f934da1175da2072d774401cf2b41f5e84b91c-60aa6c5f4cf559d1fab3.js.map